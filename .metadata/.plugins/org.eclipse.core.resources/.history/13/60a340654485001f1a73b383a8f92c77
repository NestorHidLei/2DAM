package mainApp;

import java.awt.EventQueue;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Timestamp;
import java.util.ArrayList;

import javax.swing.JFrame;

import conexion.Conexion;
import jframeApp.SwingApp;
import utils.Film;

public class MainApp {

	private static final String SELECT_PELICULAS = "SELECT * FROM film;";

		
		public static void main(String[] args) {
	        EventQueue.invokeLater(new Runnable() {
	            public void run() {
	                try {
	                    SwingApp frame = new SwingApp();
	                    frame.setVisible(true);
	                } catch (Exception e) {
	                    e.printStackTrace();
	                }
	            }
	        });
	    
		
		try (Connection connect = Conexion.conectar()) {
			PreparedStatement st = connect.prepareStatement(SELECT_PELICULAS);
			
			ArrayList<Film> listaPeliculas = new ArrayList<>();

			ResultSet rs = st.executeQuery();
				while (rs.next()) {
					int film_id = rs.getInt(1);
					String title = rs.getString(2);
					String description = rs.getString(3);
					int relase_year = rs.getInt(4);
					int language_id = rs.getInt(5);
					int original_language_id = rs.getInt(6);
					int rental_duration = rs.getInt(7);
					double rental_rate = rs.getDouble(8);
					int length = rs.getInt(9);
					double replacement_cost = rs.getDouble(10);
					String raiting = rs.getString(11);
					String special_features = rs.getString(12);
					Timestamp last_update = rs.getTimestamp(13);
					
					Film pelicula = new Film(film_id, title, description, relase_year, language_id, original_language_id, rental_duration, rental_rate, length, replacement_cost, raiting, special_features, last_update);
					listaPeliculas.add(pelicula);
					
				}
				
//				for (int i = 0; i < listaPeliculas.size(); i++) {
//					System.out.println(listaPeliculas.get(i).toString());
//					
//				}

		} catch (Exception e) {
			e.printStackTrace();
		}
	}

}
